<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>script.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Asignatura.html">Asignatura</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Asignatura.html#a%25C3%25B1adirCalificacion">aÃ±adirCalificacion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Asignatura.html#eliminarCalificacion">eliminarCalificacion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Asignatura.html#toString">toString</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Direccion.html">Direccion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Direccion.html#toString">toString</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Estudiante.html">Estudiante</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Estudiante.html#calificar">calificar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Estudiante.html#desmatricular">desmatricular</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Estudiante.html#matricular">matricular</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Estudiante.html#toString">toString</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Estudiante.html#.eliminarNumeroOcupado">eliminarNumeroOcupado</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Lista.html">Lista</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ListaAsignaturas.html">ListaAsignaturas</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ListaAsignaturas.html#a%25C3%25B1adirAsignatura">aÃ±adirAsignatura</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ListaAsignaturas.html#busquedaAsignaturas">busquedaAsignaturas</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ListaAsignaturas.html#eliminarAsignatura">eliminarAsignatura</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ListaEstudiantes.html">ListaEstudiantes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ListaEstudiantes.html#a%25C3%25B1adirEstudiante">aÃ±adirEstudiante</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ListaEstudiantes.html#busquedaEstudiantes">busquedaEstudiantes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ListaEstudiantes.html#eliminarEstudiante">eliminarEstudiante</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ListaEstudiantes.html#mostrarReporte">mostrarReporte</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#defaultConsoleGroupCollapsed">defaultConsoleGroupCollapsed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#defaultConsoleLog">defaultConsoleLog</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#eleccion">eleccion</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#listaAsignaturas">listaAsignaturas</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#listaDirecciones">listaDirecciones</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#listaEstudiantes">listaEstudiantes</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">script.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file script.js
 * @author Alonso HernÃ¡ndez Robles
 * @fileoverview ##### **Tarea 4.3**. DocumentaciÃ³n de SGAEA usando JSDoc.
 */

/** 
 â•­--------------------------------------------------------------------------------------------------------------------------------------â•®
 | SGAEA - Sistema de GestiÃ³n AcadÃ©mica de Estudiantes y Asignaturas                                                                    |
 | Alonso HernÃ¡ndez Robles 2Âº DAW AULA                                                                                                  |
 |                                                                                                                                      |
 | Github Pages: https://aloncraftmc.github.io/DWEC_VIEW_HernandezRobles_Alonso/SGAEA/Original%20(1%C2%AA%20Evaluaci%C3%B3n)/index.html |
 | (Es necesario abrir la consola de las DevTools antes de cargar la pÃ¡gina)                                                            |
 â•°--------------------------------------------------------------------------------------------------------------------------------------â•¯
 */

/**
 * 1. RedefiniciÃ³n de console.log() y console.groupCollapsed()
 * 
 * En esta secciÃ³n se redefinen los mÃ©todos console.log() y console.groupCollapsed() para aplicar estilos a los textos en funciÃ³n de su finalidad.
 * 
 * console.log() hace uso de estilos asemejados a botones, tÃ­tulos y subtÃ­tulos.
 * console.groupCollapsed() hace uso de estilos asemejados a botones y subtÃ­tulos.
 * Este mÃ©todo muestra los elementos console.log() que tenga anidados dentro, similar a un &lt;details>.
 * 
 * Por defecto, los mÃ©todos mostrarÃ¡n un texto con la fuente 'Rubik', importada desde la etiqueta &lt;style> de index.html.
 */

/**
 * @global
 * @constant
 * @type {Function}
 * @description **FunciÃ³n original** de `console.log()`.
 */
const defaultConsoleLog = console.log;

console.log = (texto, estilos = "", otrosEstilos = "") => {
    
    texto = "%c" + texto;

    switch(estilos){

        case "boton":
            estilos = "padding: 10px;";
            estilos += "border: 5px solid gray;";
            estilos += "border-radius: 10px;";
            estilos += "background-color: white;";
            estilos += "color: black;";
            estilos += "font-size: 20px;";
            estilos += "margin: 5px;";
            break;

        case "titulo":
            estilos = "font-size: 50px;";
            estilos += "margin: 5px;";
            break;

        case "subtitulo":
            estilos = "font-size: 30px;"
            estilos += "color: #BBBBBB;";
            estilos += "padding: 2px;";
            break;

        default:
            estilos += "font-size: 20px;";
            estilos += "padding: 10px;";
            break;

    }

    estilos += "font-family: Rubik, sans-serif;" + otrosEstilos;
    defaultConsoleLog.call(console, texto, estilos);

};

/**
 * @global
 * @constant
 * @type {Function}
 * @description **FunciÃ³n original** de `console.groupCollapsed()`.
 */
const defaultConsoleGroupCollapsed = console.groupCollapsed;

console.groupCollapsed = (texto, estilos = "") => {
    
    texto = "%c" + texto;

    switch(estilos){

        case "boton":
            estilos = "padding: 10px;";
            estilos += "border: 5px solid gray;";
            estilos += "border-radius: 10px;";
            estilos += "background-color: white;";
            estilos += "color: black;";
            estilos += "font-size: 30px;";
            estilos += "margin: 5px;";
            break;

        case "subtitulo":
            estilos = "font-size: 30px;"
            estilos += "padding: 10px;";
            break;

        default:
            estilos += "font-size: 20px;";
            estilos += "padding: 10px;";
            break;

    }

    estilos += "font-family: 'Rubik', sans-serif; font-weight: normal;";
    defaultConsoleGroupCollapsed.call(console, texto, estilos);

};

/**
 * 2. DefiniciÃ³n de Clases
 * 
 * En esta parte se definen las clases Direccion, Estudiante, Asignatura, ListaEstudiantes y ListaAsignaturas.
 */

/**
 * 2.1. Clase Direccion
 * 
 * La clase Direccion tiene los atributos calle, numero, piso, codigoPostal, provincia y localidad, todos son
 * tipo String y tienen getter. En el constructor se valida el cÃ³digo postal (5 nÃºmeros). Si no es vÃ¡lido, se
 * establecerÃ¡ como "00000". Contiene un toString() que muestra todas las propiedades.
 */

/**
 * @class
 * @classdesc Representa una **direcciÃ³n** de un estudiante.
 */
class Direccion{

    /**
     * @type {String}
     * @private
     * @description **Calle** de la direcciÃ³n. Tiene getter.
     */
    #calle;

    /**
     * @type {String}
     * @private
     * @description **NÃºmero** de la direcciÃ³n. Tiene getter.
     */
    #numero;

    /**
     * @type {String}
     * @private
     * @description **Piso** de la direcciÃ³n. Tiene getter.
     */
    #piso;

    /**
     * @type {String}
     * @private
     * @description **CÃ³digo postal** de la direcciÃ³n. Tiene getter.
     */
    #codigoPostal;

    /**
     * @type {String}
     * @private
     * @description **Provincia** de la direcciÃ³n. Tiene getter.
     */
    #provincia;

    /**
     * @type {String}
     * @private
     * @description **Localidad** de la direcciÃ³n. Tiene getter.
     */
    #localidad;

    /**
     * @constructor
     * @param {String} calle Calle de la direcciÃ³n
     * @param {String} numero NÃºmero de la direcciÃ³n
     * @param {String} piso Piso de la direcciÃ³n
     * @param {String} codigoPostal CÃ³digo postal de la direcciÃ³n
     * @param {String} provincia Provincia de la direcciÃ³n
     * @param {String} localidad Localidad de la direcciÃ³n
     * @description Crea una **direcciÃ³n** con los datos proporcionados.
     * - Se valida el cÃ³digo postal (5 nÃºmeros).
     * - Si no es vÃ¡lido, se establecerÃ¡ como `"00000"`.
     * @see #calle
     * @see #numero
     * @see #piso
     * @see #codigoPostal
     * @see #provincia
     * @see #localidad
     */
    constructor(calle, numero, piso, codigoPostal, provincia, localidad){

        this.#calle = calle;
        this.#numero = numero;
        this.#piso = piso;
        this.#codigoPostal = (new String(codigoPostal).match(/^[0-9]{5}$/)) ? codigoPostal : "00000";
        this.#provincia = provincia;
        this.#localidad = localidad;

    }

    /**
     * @type {String}
     * @description Getter de la calle de la direcciÃ³n.
     * @see #calle
     */
    get calle(){
        return this.#calle;
    }

    /**
     * @type {String}
     * @description Getter del nÃºmero de la direcciÃ³n.
     * @see #numero
     */
    get numero(){
        return this.#numero;
    }

    /**
     * @type {String}
     * @description Getter del piso de la direcciÃ³n.
     * @see #piso
     */
    get piso(){
        return this.#piso;
    }

    /**
     * @type {String}
     * @description Getter del cÃ³digo postal de la direcciÃ³n.
     * @see #codigoPostal
     */
    get codigoPostal(){
        return this.#codigoPostal;
    }

    /**
     * @type {String}
     * @description Getter de la provincia de la direcciÃ³n.
     * @see #provincia
     */
    get provincia(){
        return this.#provincia;
    }

    /**
     * @type {String}
     * @description Getter de la localidad de la direcciÃ³n.
     * @see #localidad
     */
    get localidad(){
        return this.#localidad;
    }

    /**
     * @function
     * @override
     * @returns {String} DirecciÃ³n completa.
     * @description Devuelve la direcciÃ³n completa.
     * @example "C/ Rara 12, 3ÂºA - 18015 Granada (Granada)"
     */
    toString(){
        return this.#calle + " " + this.#numero + ", " + this.#piso + " - " + this.#codigoPostal + " " + this.#localidad + " (" + this.#provincia + ")";
    }

}

/**
 * 2.2. Clase Estudiante
 * 
 * Atributos:
 * 
 * - id: String identificador Ãºnico del estudiante. SerÃ¡ "E" seguido del nÃºmero siguiente posible que no estÃ©
 *      ocupado. Los nÃºmeros ocupados estarÃ¡n almacenados en el atributo estÃ¡tico numerosOcupados, y serÃ¡
 *      calculado en el constructor. Volviendo al id, tiene getter.
 * 
 * - nombre: String del nombre del estudiante. SÃ³lo puede contener letras y espacios. De lo contrario, se
 *      inicializarÃ¡ como "Estudiante". Tiene getter.
 * 
 * - edad: Number de edad del estudiante. SÃ³lo puede ser positiva. De lo contrario, se inicializarÃ¡ como 0.
 *      Tiene getter.
 * 
 * - direccion: Objeto Direccion con campos de la direcciÃ³n del estudiante. Tiene getter.
 * 
 * - asignaturas: Array (matriz) de asignaturas de las cuales el estudiante estÃ¡ matriculado. Cada elemento
 *      es un Array con dos posiciones. La primera ([0]) es la instancia en sÃ­ del objeto Asignatura.
 *      La segunda ([1]) es la calificaciÃ³n que tiene el estudiante en dicha asignatura. Su getter devuelve
 *      una copia del Array y no la referencia.
 * 
 * - registros: Array (matriz) de registros de las matrÃ­culas y desmatrÃ­culas que se han aplicado al
 *      estudiante. Cada elemento es un Array con tres posiciones. La primera ([0]) es un String del nombre
 *      de la asignatura. La segunda ([1]) es la fecha y hora en la cual se hizo el trÃ¡mite. La tercera ([2])
 *      es un String del tipo de trÃ¡mite ("MatrÃ­cula" o "DesmatrÃ­cula"). Su getter devuelve un Array de
 *      Strings con la informaciÃ³n de cada registro.
 * 
 * - numerosOcupados (estÃ¡tico): Array de los nÃºmeros de las ids usadas por los estudiantes creados en ese
 *      momento. Se actualizarÃ¡ dinÃ¡micamente en la creaciÃ³n y eliminaciÃ³n de estudiantes. No tiene getter.
 * 
 * MÃ©todos:
 * 
 * + constructor(nombre, edad, direccion): Calcula el nÃºmero de la id, empezando por 1 hasta que encuentre un nÃºmero
 *      no ocupado, lo aÃ±ade al Array estÃ¡tico numerosOcupados, y establece la id como el String "E" concatenado de
 *      dicho nÃºmero. Si el nombre es null o contiene caracteres que no sean letras o espacios, se establece como
 *      "Estudiante". De lo contrario, se establece como tal. Si la edad es un nÃºmero negativo, se establece como 0.
 *      De lo contrario, se establece como tal. Se inicializan vacÃ­os los Arrays asignaturas y registros.
 * 
 * + get promedio(): Number del promedio de la nota de cada asignatura del estudiante. Devuelve el String
 *      "Sin evaluar" si ninguna nota es un nÃºmero.
 * 
 * + toString(): String con el id, nombre y edad del estudiante.
 * 
 * + matricular(...asignaturas): Introduce en el Array asignaturas Arrays de dos posiciones, tantos
 *      como asignaturas haya, y en la primera posiciÃ³n ([0]) de cada uno de estos, cada una de las instancias
 *      de dichas asignaturas. Introduce un nuevo registro generado en el Array registros por cada una de las asignaturas.
 * 
 * + desmatricular(...asignaturas): Elimina del Array asignaturas las asignaturas cuyo nombre coincida
 *      con los nombres de ...asignaturas e introduce un nuevo registro generado en el Array registros por cada
 *      asignatura de la cual se ha desmatriculado el estudiante.
 * 
 * + calificar(asignatura, nota): Si la asignatura estÃ¡ presente en el Array asignaturas y la nota es un
 *      nÃºmero entre 0 y 10 (incluidos), busca el Array que contiene la asignatura dentro del Array asignaturas
 *      y establece en la segunda posiciÃ³n ([1]) la nota. AdemÃ¡s aÃ±ade dicha calificaciÃ³n a la lista de
 *      calificaciones de la asignatura mediante el mÃ©todo aÃ±adirCalificacion(). De lo contrario,
 *      devuelve un Error correspondiente.
 * 
 * + eliminarNumeroOcupado(numero) (estÃ¡tico): Elimina numero del Array estÃ¡tico numerosOcupados.
 */

/**
 * @class
 * @classdesc Representa un **estudiante**.
 */
class Estudiante{

    /**
     * @type {String}
     * @private
     * @description **Identificador** Ãºnico del estudiante. Tiene getter.
     * - SerÃ¡ `"E"` seguido del nÃºmero siguiente posible que no estÃ© ocupado.
     * - Los nÃºmeros ocupados estarÃ¡n almacenados en el atributo estÃ¡tico `#numerosOcupados`, y serÃ¡ calculado en el constructor.
     */
    #id;

    /**
     * @type {String}
     * @private
     * @description **Nombre** del estudiante. Tiene getter.
     * - SÃ³lo puede contener letras y espacios. De lo contrario, se inicializarÃ¡ como `"Estudiante"`.
     */
    #nombre;

    /**
     * @type {Number}
     * @private
     * @description **Edad** del estudiante. Tiene getter.
     * - SÃ³lo puede ser positiva. De lo contrario, se inicializarÃ¡ como `0`.
     */
    #edad;

    /**
     * @type {Direccion}
     * @private
     * @description **DirecciÃ³n** del estudiante. Tiene getter.
     */
    #direccion;

    /**
     * @type {Array[]}
     * @private
     * @description **Asignaturas** de las cuales el estudiante estÃ¡ matriculado y sus correspondientes **calificaciones**.
     * - Cada elemento es un Array con dos posiciones.
     *      - La primera (`[0]`) es la instancia en sÃ­ del objeto `Asignatura`.
     *      - La segunda (`[1]`) es la calificaciÃ³n que tiene el estudiante en dicha asignatura.
     * - Su getter devuelve una copia del Array y no la referencia.
     */
    #asignaturas;

    /**
     * @type {String[]}
     * @private
     * @description **Registros** de matriculaciones y desmatriculaciones que se han aplicado al estudiante.
     * - Cada elemento es un Array con tres posiciones.
     *      - La primera (`[0]`) es un String del nombre de la asignatura.
     *      - La segunda (`[1]`) es la fecha y hora en la cual se hizo el trÃ¡mite.
     *      - La tercera (`[2]`) es un String del tipo de trÃ¡mite (`"MatriculaciÃ³n"` o `"DesmatriculaciÃ³n"`).
     * - Su getter devuelve un Array de Strings con la informaciÃ³n de cada registro.
     */
    #registros;
    
    /**
     * @type {Number[]}
     * @private
     * @static
     * @description **NÃºmeros** de las ids usadas por los estudiantes creados en ese momento. No tiene getter.
     * - Se actualizarÃ¡ dinÃ¡micamente en la creaciÃ³n y eliminaciÃ³n de estudiantes.
     */
    static #numerosOcupados = [];

    /**
     * @constructor
     * @param {String} nombre Nombre del estudiante
     * @param {String} edad Edad del estudiante
     * @param {Direccion} direccion DirecciÃ³n del estudiante
     * @description Crea un **estudiante** con los datos proporcionados.
     * - Calcula el nÃºmero de la id, empezando por `1` hasta que encuentre un nÃºmero no ocupado, lo aÃ±ade al Array estÃ¡tico `#numerosOcupados`, y establece la id como el String `"E"` concatenado de dicho nÃºmero.
     * - Si el nombre es `null` o contiene caracteres que no sean letras o espacios, se establece como `"Estudiante"`. De lo contrario, se establece como tal.
     * - Si la edad es un nÃºmero negativo, se establece como `0`. De lo contrario, se establece como tal.
     * - Se inicializan vacÃ­os los Arrays `#asignaturas` y `#registros`.
     * @see #id
     * @see #nombre
     * @see #edad
     * @see #direccion
     * @see #asignaturas
     * @see #registros
     */
    constructor(nombre, edad, direccion){

        let numeroId = 1;

        while (Estudiante.#numerosOcupados.includes(numeroId)) {
            numeroId++;
        }

        Estudiante.#numerosOcupados.push(numeroId);
        this.#id = "E" + numeroId;

        this.#nombre = (nombre != null) ? ((nombre.match(/^[a-zA-ZÃ¡Ã©Ã­Ã³ÃºÃ¼ÃÃ‰ÃÃ“ÃšÃœ ]+$/)) ? nombre : "Estudiante") : "Estudiante";

        this.#edad = (!Number.isNaN(edad) &amp;&amp; Number.isInteger(edad) &amp;&amp; edad > 0) ? edad : 0;

        this.#direccion = direccion;
        this.#asignaturas = [];
        this.#registros = [];

    }

    /**
     * @type {String}
     * @description Getter del identificador del estudiante.
     * @see #id
     */
    get id(){
        return this.#id;
    }

    /**
     * @type {String}
     * @description Getter del nombre del estudiante.
     * @see #nombre
     */
    get nombre(){
        return this.#nombre;
    }

    /**
     * @type {Number}
     * @description Getter de la edad del estudiante.
     * @see #edad
     */
    get edad(){
        return this.#edad;
    }

    /**
     * @type {Direccion}
     * @description Getter de la direcciÃ³n del estudiante.
     * @see #direccion
     */
    get direccion(){
        return this.#direccion;
    }

    /**
     * @type {Array[]}
     * @description Getter de las asignaturas del estudiante con sus correspondientes calificaciones.
     * @see #asignaturas
     */
    get asignaturas(){
        return [...this.#asignaturas];
    }

    /**
     * @type {String[]}
     * @description Getter de los registros del estudiante.
     * @see #registros
     */
    get registros(){

        const resultado = [];
        
        for(const registro of this.#registros){
            
            const asignatura = registro[0];
            const fecha = registro[1].toLocaleDateString("es-ES", {weekday: "long", year: "numeric", month: "short", day: "numeric"});
            const hora = registro[1].toLocaleTimeString("es-ES");
            const tipo = registro[2];

            resultado.push("[\t" + tipo + "\t|\t" + asignatura + "\t|\t" + fecha + " a las " + hora + "\t]");

        }
        
        return resultado;

    }

    /**
     * @type {String | Number}
     * @description **Promedio** de las calificaciones de las asignaturas del estudiante.
     * @see #asignaturas
     */
    get promedio(){

        const asignaturasCalificadas = this.#asignaturas.filter(a => typeof a[1] != "string");
        
        if(asignaturasCalificadas.length == 0) return "Sin evaluar";
        
        const resultado = asignaturasCalificadas.reduce((suma, asignatura) => suma += asignatura[1], 0) / asignaturasCalificadas.length;
        
        return Number(resultado).toFixed(2);

    }

    /**
     * @function
     * @override
     * @returns {String} Id, nombre y edad del estudiante.
     * @description Devuelve el id, nombre y edad del estudiante.
     * @example "[E1] Alonso HernÃ¡ndez Robles, 20"
     */
    toString(){
        return "[" + this.#id + "] " + this.#nombre + ", " + this.#edad;
    }

    /**
     * @function
     * @param  {...Asignatura} asignaturas Asignaturas a matricular
     * @description **Matricula** al estudiante de las asignaturas proporcionadas y genera un registro con dicha informaciÃ³n.
     * @see #asignaturas
     * @see #registros
     */
    matricular(...asignaturas){

        for(const asignatura of asignaturas){

            if(this.#asignaturas.filter(a => a[0].nombre == asignatura.nombre).length == 0){

                this.#asignaturas.push([asignatura, "Sin evaluar"]);
                this.#registros.push([asignatura.nombre, new Date(), "MatriculaciÃ³n"]);

            }

        }

    }

    /**
     * @function
     * @param  {...Asignatura} asignaturas Asignaturas a desmatricular
     * @description **Desmatricula** al estudiante de las asignaturas proporcionadas y genera un registro con dicha informaciÃ³n.
     * @see #asignaturas
     * @see #registros
     */
    desmatricular(...asignaturas){
        
        for(const asignatura of asignaturas){

            if(this.#asignaturas.map(a => a[0].nombre).includes(asignatura.nombre)){

                this.#asignaturas = this.#asignaturas.filter(a => a[0].nombre != asignatura.nombre);
                this.#registros.push([asignatura.nombre, new Date(), "DesmatriculaciÃ³n"]);

            }

        }

    }

    /**
     * @function
     * @param {Asignatura} asignatura Asignatura a calificar
     * @param {Number} nota Nota a asignar
     * @throws {Error} Si la asignatura no estÃ¡ en el Array `#asignaturas`.
     * @throws {Error} Si la nota no estÃ¡ entre `0` y `10`.
     * @description **Califica** al estudiante en la asignatura proporcionada con la nota proporcionada.
     * @see #asignaturas
     */
    calificar(asignatura, nota){

        if(!this.#asignaturas.map(a => a[0].nombre).includes(asignatura.nombre)) throw new Error("El estudiante no estÃ¡ cursando la asignatura.");

        if(nota &lt; 0 || nota > 10) throw new Error("La nota debe estar entre 0 y 10.");

        for (const asig of this.#asignaturas) {

            if (asig[0].nombre == asignatura.nombre) {

                asig[1] = parseFloat(nota);
                asignatura.aÃ±adirCalificacion(nota);
                break;

            }
            
        }

    }

    /**
     * @function
     * @param {Number} numero NÃºmero de la id a eliminar
     * @static
     * @description **Elimina** un nÃºmero de la lista de nÃºmeros ocupados.
     * @see #numerosOcupados
     */
    static eliminarNumeroOcupado(numero){
        Estudiante.#numerosOcupados = Estudiante.#numerosOcupados.filter(n => n != numero);
    }

}

/**
 * 2.3. Clase Asignatura
 * 
 * Atributos:
 * 
 * - nombre: String del nombre de la asignatura. SÃ³lo puede contener letras y espacios. De lo contrario, se
 *      inicializarÃ¡ como "Asignatura". Tiene getter.
 * 
 * - calificaciones: Array de nÃºmeros de las calificaciones de todos los estudiantes en la asignatura. No tiene getter.
 * 
 * MÃ©todos:
 * 
 * + constructor(nombre): Si el nombre contiene caracteres que no sean letras o espacios, se
 *      establece como "Asignatura". De lo contrario, se establece como tal. Se inicializa vacÃ­o el Array
 *      calificaciones.
 * 
 * + get promedio(): Number del promedio de los nÃºmeros del Array calificaciones. Devuelve el String
 *      "Sin evaluar" si dicho array estÃ¡ vacÃ­o.
 * 
 * + toString(): Devuelve el nombre de la asignatura (Ya que el objeto Asignatura no contiene mÃ¡s
 *      atributos sobre la informaciÃ³n de la instancia, el mÃ©todo es idÃ©ntico a get nombre(), pero se declararÃ¡
 *      y usarÃ¡ con propÃ³sitos semÃ¡nticos);
 * 
 * + aÃ±adirCalificacion(calificacion): AÃ±ade calificacion al Array calificaciones.
 * 
 * + eliminarCalificacion(calificacion): Elimina una ocurrencia cualquiera de calificacion en el Array calificaciones.
 */

/**
 * @class
 * @classdesc Representa una **asignatura**.
 */
class Asignatura{

    /**
     * @type {String}
     * @private
     * @description **Nombre** de la asignatura. Tiene getter.
     * - SÃ³lo puede contener letras y espacios. De lo contrario, se inicializarÃ¡ como `"Asignatura"`.
     */
    #nombre;

    /**
     * @type {Number[]}
     * @private
     * @description **Calificaciones** de los estudiantes en la asignatura. No tiene getter.
     */
    #calificaciones;

    /**
     * @constructor
     * @param {String} nombre Nombre de la asignatura
     * @description Crea una **asignatura** con los datos proporcionados.
     * - Si el nombre contiene caracteres que no sean letras o espacios, se establece como `"Asignatura"`. De lo contrario, se establece como tal.
     * - Se inicializa vacÃ­o el Array `#calificaciones`.
     * @see #nombre
     * @see #calificaciones
     */
    constructor(nombre){
        
        this.#nombre = (nombre.match(/^[a-zA-ZÃ¡Ã©Ã­Ã³ÃºÃ¼ÃÃ‰ÃÃ“ÃšÃœ ]+$/)) ? nombre : "Asignatura";
        this.#calificaciones = [];

    }

    /**
     * @type {String}
     * @description Getter del nombre de la asignatura.
     * @see #nombre
     */
    get nombre(){
        return this.#nombre;
    }

    /**
     * @type {Number}
     * @description **Promedio** de las calificaciones de los estudiantes en la asignatura.
     * - Devuelve `"Sin evaluar"` si no hay calificaciones.
     * @see #calificaciones
     */
    get promedio(){

        if(this.#calificaciones.length == 0) return "Sin evaluar";
        
        const resultado = this.#calificaciones.reduce((suma, calificacion) => suma += Number.parseFloat(calificacion), 0) / this.#calificaciones.length;
    
        return Number(resultado).toFixed(2);

    }

    /**
     * @function
     * @override
     * @returns {String} Nombre de la asignatura.
     * @description Devuelve el nombre de la asignatura.
     * > Ya que el objeto Asignatura no contiene mÃ¡s atributos sobre la informaciÃ³n de la instancia, el mÃ©todo es idÃ©ntico a `get nombre()`, pero se declararÃ¡ y usarÃ¡ con propÃ³sitos semÃ¡nticos.
     * @example "DWEC"
     */
    toString(){
        return this.#nombre;
    }

    /**
     * @function
     * @param {Number} calificacion CalificaciÃ³n a aÃ±adir
     * @description **AÃ±ade** una calificaciÃ³n a la asignatura.
     * > Saber a quÃ© estudiante estÃ¡ correspondida la calificaciÃ³n no es relevante, para ello dicha informaciÃ³n ya se encuentra almacenada dentro de la propiedad privada [`#asignaturas`](Estudiante.html#asignaturas) de la clase [`Estudiante`](Estudiante.html).
     * @see #calificaciones
     */
    aÃ±adirCalificacion(calificacion){
        this.#calificaciones.push(calificacion);
    }

    /**
     * @function
     * @param {Number} calificacion CalificaciÃ³n a eliminar
     * @throws {Error} Si la calificaciÃ³n no estÃ¡ en el Array #calificaciones.
     * @description **Elimina** una ocurrencia cualquiera de `calificacion` en el Array `#calificaciones`.
     * > Saber a quÃ© estudiante estÃ¡ correspondida la calificaciÃ³n no es relevante, para ello dicha informaciÃ³n ya se encuentra almacenada dentro de la propiedad privada [`#asignaturas`](Estudiante.html#asignaturas) de la clase [`Estudiante`](Estudiante.html).
     * @see #calificaciones
     */
    eliminarCalificacion(calificacion){

        const indiceCalificacion = this.#calificaciones.indexOf(calificacion);

        if(indiceCalificacion == -1) throw new Error("NingÃºn estudiante ha sacado dicha calificaciÃ³n.");

        this.#calificaciones.splice(indiceCalificacion, 1);

    }

}

/**
 * 2.4. Clase Lista
 * 
 * Atributos:
 * 
 * - listaRef: Array de objetos. Su getter devuelve la referencia original al Array. TambiÃ©n tiene setter.
 *      Orientado para ser usado en la definiciÃ³n de las clases hijas ListaEstudiantes y ListaAsignaturas.
 * 
 * MÃ©todos:
 * 
 * + constructor(): Inicializa vacÃ­o el Array #listaRef.
 * 
 * + get lista(): Array de objetos. Devuelve una copia del Array #listaRef y no la referencia.
 *      Orientado para ser usado en la creaciÃ³n y uso de objetos ListaEstudiantes y/o ListaAsignaturas.
 */

/**
 * @class
 * @classdesc Representa una **lista** de objetos.
 */
class Lista{

    /**
     * @type {Object[]}
     * @private
     * @description Array de objetos.
     * - Su getter devuelve la referencia original al Array. TambiÃ©n tiene setter.
     * > Orientado para ser usado en la definiciÃ³n de las clases hijas [`ListaEstudiantes`](ListaEstudiantes.html) y [`ListaAsignaturas`](ListaAsignaturas.html).
     */
    #listaRef;

    /**
     * @constructor
     * @description Crea una **lista**.
     * - Inicializa vacÃ­o el Array `#listaRef`.
     * @see #listaRef
     */
    constructor(){
        this.#listaRef = [];
    }

    /**
     * @type {Object[]}
     * @description Array de objetos.
     * - Devuelve una copia del Array `#listaRef` y no la referencia.
     * > Orientado para ser usado en la creaciÃ³n y uso de objetos [`ListaEstudiantes`](ListaEstudiantes.html) y/o [`ListaAsignaturas`](ListaAsignaturas.html).
     * @see #listaRef
     */
    get lista(){
        return [...this.#listaRef];
    }

    /**
     * @type {Object[]}
     * @description Getter del Array `#listaRef`.
     * @see #listaRef
     */
    get listaRef(){
        return this.#listaRef;
    }

    set listaRef(listaRef){
        this.#listaRef = listaRef;
    }

}

/**
 * 2.5. Clase ListaEstudiantes
 * 
 * MÃ©todos:
 * 
 * + constructor(...estudiantes): Llama al constructor padre y aÃ±ade los estudiantes mediante el mÃ©todo
 *      aÃ±adirEstudiante().
 * 
 * + get promedioGeneral(): Number del promedio de los promedios de todos los estudiantes del Array listaRef.
 *      Devuelve el String "Sin evaluar" si ningÃºn promedio es un nÃºmero.
 * 
 * + mostrarReporte(): Muestra mediante console.log(), console.groupCollapsed() y console.groupEnd() el reporte
 *      con la informaciÃ³n de todos los estudiantes del Array listaRef. console.log() muestra por
 *      consola un mensaje. console.groupCollapsed() muestra por consola un mensaje cÃ³mo tÃ­tulo de una
 *      carpeta colapsada de los mensajes que vayan a continuaciÃ³n. console.groupEnd() indica el final de
 *      dicha carpeta de mensajes.
 * 
 * + aÃ±adirEstudiante(estudiante): Si no existe el estudiante dentro del Array listaRef, lo aÃ±ade y ordena dicho
 *      Array segÃºn los nÃºmeros de las ids de los estudiantes. De lo contrario, devuelve un Error.
 * 
 * + eliminarEstudiante(id): Elimina del Array listaRef el estudiante cuya id sea la misma que id y elimina el
 *      nÃºmero ocupado de dicha id mediante el mÃ©todo estÃ¡tico eliminarNumeroOcupado().
 * 
 * + busquedaEstudiantes(exp): Array de los objetos Estudiante cuyos nombres incluyen el String exp.
 */

/**
 * @class
 * @classdesc Representa una **lista de estudiantes**.
 * @extends Lista
 * @see Lista
 */
class ListaEstudiantes extends Lista{

    /**
     * @constructor
     * @param {...Estudiante} estudiantes Estudiantes a aÃ±adir
     * @description Crea una **lista de estudiantes**.
     * - Llama al constructor padre y aÃ±ade los estudiantes mediante el mÃ©todo `aÃ±adirEstudiante()`.
     */
    constructor(...estudiantes){

        super();
        
        for(const estudiante of estudiantes){

            this.aÃ±adirEstudiante(estudiante);

        }

    }

    /**
     * @type {String | Number}
     * @description **Promedio general**, de los promedios de los estudiantes.
     * - Devuelve `"Sin evaluar"` si ningÃºn promedio es un nÃºmero.
     * @see #listaRef
     */
    get promedioGeneral(){

        const estudiantesCalificados = this.listaRef.filter(e => !isNaN(Number(e.promedio)));
        
        if(estudiantesCalificados.length == 0) return "Sin evaluar";
        
        const resultado = estudiantesCalificados.reduce((suma, estudiante) => suma += Number.parseFloat(estudiante.promedio), 0) / estudiantesCalificados.length;
    
        return Number(resultado).toFixed(2);

    }
    
    /**
     * @function
     * @description **Muestra**, mediante `console.log()`, `console.groupCollapsed()` y `console.groupEnd()`, el reporte con la informaciÃ³n de todos los estudiantes del Array `listaRef`.
     * 
     * > `console.log()` muestra por consola un mensaje.
     * >
     * > `console.groupCollapsed()` muestra por consola un mensaje cÃ³mo tÃ­tulo de una carpeta colapsada de los mensajes que vayan a continuaciÃ³n.
     * >
     * > `console.groupEnd()` indica el final de dicha carpeta de mensajes.
     * @see #listaRef
     */
    mostrarReporte(){

        for(const estudiante of this.listaRef){

            console.groupCollapsed("[" + estudiante.id + "] " + estudiante.nombre, "boton");

                console.groupCollapsed("\tDatos Personales", "subtitulo");

                    console.log("\t\t\tNombre: " + estudiante.nombre);
                    console.log("\t\t\tEdad: " + estudiante.edad);

                    console.groupCollapsed("\t\t\tDirecciÃ³n");

                        console.log("\t\t\t\t\tCalle: " + estudiante.direccion.calle);
                        console.log("\t\t\t\t\tNÃºmero: " + estudiante.direccion.numero);
                        console.log("\t\t\t\t\tPiso: " + estudiante.direccion.piso);
                        console.log("\t\t\t\t\tCÃ³digo Postal: " + estudiante.direccion.codigoPostal);
                        console.log("\t\t\t\t\tProvincia: " + estudiante.direccion.provincia);
                        console.log("\t\t\t\t\tLocalidad: " + estudiante.direccion.localidad);

                    console.groupEnd();

                console.groupEnd();

                console.groupCollapsed("\tCalificaciones", "subtitulo");

                    for(const asignatura of estudiante.asignaturas){

                        const notaAsignatura = (typeof asignatura[1] == "string") ? asignatura[1] : Number(asignatura[1]).toFixed(2);
                        console.log("\t\t\t" + asignatura[0].nombre + ": " + notaAsignatura);

                    }

                    console.log("\t\t\tPromedio: " + estudiante.promedio, "font-weight: bold;");

                console.groupEnd();

            console.groupEnd();

        }

    }

    /**
     * @function
     * @param {Estudiante} estudiante Estudiante a aÃ±adir
     * @throws {Error} Si el estudiante ya estÃ¡ en el Array `listaRef`.
     * @description **AÃ±ade** un estudiante a la lista.
     * - Ordena el Array segÃºn los nÃºmeros de las ids de los estudiantes.
     * @see #listaRef
     */
    aÃ±adirEstudiante(estudiante){

        if(this.listaRef.filter(e => e.id == estudiante.id).length != 0) throw new Error("Ya existe el estudiante.");

        this.listaRef.push(estudiante);
        this.listaRef.sort((e1, e2) => parseInt(e1.id.slice(1)) - parseInt(e2.id.slice(1)));

    }

    /**
     * @function
     * @param {String} id Id del estudiante a eliminar
     * @throws {Error} Si el estudiante no estÃ¡ en el Array `listaRef`.
     * @description **Elimina** un estudiante de la lista.
     * - Elimina el nÃºmero ocupado de la id del estudiante.
     * @see #listaRef
     */
    eliminarEstudiante(id){
        
        if(this.listaRef.filter(e => e.id != id).length == this.listaRef.length) throw new Error("El estudiante no se encuentra en la lista.");
        
        this.listaRef = this.listaRef.filter(e => e.id != id);
        Estudiante.eliminarNumeroOcupado(id.slice(1));

    }

    /**
     * @function
     * @param {String} exp ExpresiÃ³n a buscar
     * @returns {Estudiante[]} Estudiantes cuyos nombres incluyen el String `exp`.
     * @description **Busca** estudiantes cuyos nombres incluyen el String `exp`.
     * @see #listaRef
     */
    busquedaEstudiantes(exp){
        return this.listaRef.filter(e => e.nombre.toLowerCase().includes(exp.toLowerCase()));
    }

}

/**
 * 2.6. Clase ListaAsignaturas
 * 
 * MÃ©todos:
 * 
 * + constructor(...asignatura): Llama al constructor padre y aÃ±ade las asignaturas mediante el mÃ©todo
 *      aÃ±adirAsignatura().
 * 
 * + aÃ±adirAsignatura(asignatura): Si no existe la asignatura dentro del Array listaRef, la aÃ±ade. De lo
 *      contrario, devuelve un Error.
 * 
 * + eliminarAsignatura(nombre): Si existe una asignatura cuyo nombre coincide con alguno de los nombres de las
 *      asignaturas del Array listaRef, elimina de dicho Array dicha asignatura. De lo contrario, devuelve un Error.
 * 
 * + busquedaAsignaturas(exp): Array de los objetos Asignatura cuyos nombres incluyen el String exp.
 */

/**
 * @class
 * @classdesc Representa una **lista de asignaturas**.
 * @extends Lista
 * @see Lista
 */
class ListaAsignaturas extends Lista{

    /**
     * @constructor
     * @param {...Asignatura} asignaturas Asignaturas a aÃ±adir
     * @description Crea una **lista de asignaturas**.
     * - Llama al constructor padre y aÃ±ade las asignaturas mediante el mÃ©todo `aÃ±adirAsignatura()`.
     */
    constructor(...asignaturas){

        super();
        
        for(const asignatura of asignaturas){

            this.aÃ±adirAsignatura(asignatura);

        }

    }

    /**
     * @function
     * @param {Asignatura} asignatura Asignatura a aÃ±adir
     * @throws {Error} Si la asignatura ya estÃ¡ en el Array `listaRef`.
     * @description **AÃ±ade** una asignatura a la lista.
     * @see #listaRef
     */
    aÃ±adirAsignatura(asignatura){

        if(this.listaRef.filter(a => a.nombre == asignatura.nombre).length != 0) throw new Error("Ya existe la asignatura.");

        this.listaRef.push(asignatura);

    }

    /**
     * @function
     * @param {String} nombre Nombre de la asignatura a eliminar
     * @throws {Error} Si la asignatura no estÃ¡ en el Array `listaRef`.
     * @description **Elimina** una asignatura de la lista.
     * @see #listaRef
     */
    eliminarAsignatura(nombre){

        if(this.listaRef.filter(a => a.nombre == nombre).length == 0) throw new Error("La asignatura no se encuentra en la lista.");

        this.listaRef = this.listaRef.filter(a => a.nombre != nombre);

    }

    /**
     * @function
     * @param {String} exp ExpresiÃ³n a buscar
     * @returns {Asignatura[]} Asignaturas cuyos nombres incluyen el String `exp`.
     * @description **Busca** asignaturas cuyos nombres incluyen el String `exp`.
     * @see #listaRef
     */
    busquedaAsignaturas(exp){
        return this.listaRef.filter(a => a.nombre.toLowerCase().includes(exp.toLowerCase()));
    }

}

/**
 * 3. Programa Principal.
 * 
 * En esta secciÃ³n se declara un objeto ListaEstudiantes, otro objeto ListaAsignaturas, y un Array de objetos
 * Direccion llamado listaDirecciones. Seguidamente, se entra en el bucle while.
 * 
 * Extra: Se inicializan y aÃ±aden 5 direcciones, 5 estudiantes y 5 asignaturas.
 *        Se matriculan a algunos estudiantes de algunas asignaturas.
 *        Se desmatriculan a algunos estudiantes de algunas asignaturas.
 *        Se califican a algunos estudiantes en algunas asignaturas.
 * 
 * Por siempre, se preguntarÃ¡ la elecciÃ³n principal de la acciÃ³n a realizar.
 * La variable eleccion serÃ¡ la variable que siempre obtenga el valor de window.prompt().
 */

/**
 * @global
 * @constant
 * @type {ListaEstudiantes} 
 * @description **Lista** de **estudiantes**.
 * @see ListaEstudiantes
 */
const listaEstudiantes = new ListaEstudiantes();

/**
 * @global
 * @constant
 * @type {ListaAsignaturas} 
 * @description **Lista** de **asignaturas**.
 * @see ListaAsignaturas
 */
const listaAsignaturas = new ListaAsignaturas();

/**
 * @global
 * @type {Direccion[]}
 * @description Lista de **direcciones**.
 * @see Direccion
 */
let listaDirecciones = [];

/**
 * @global
 * @type {Number}
 * @description **ElecciÃ³n** de la acciÃ³n a realizar.
 */
let eleccion;

// CreaciÃ³n de Direcciones

listaDirecciones.push(new Direccion("C/ AfÃ¡n de Ribera", 15, "2ÂºA", 18005, "Granada", "Granada"));
listaDirecciones.push(new Direccion("C/ Aliatar", 17, "Piso Bajo", 18110, "Granada", "HÃ­jar"));
listaDirecciones.push(new Direccion("C/ Canalejas", 5, "2ÂºB", 23790, "JaÃ©n", "Porcuna"));
listaDirecciones.push(new Direccion("C/ Paraguay", 1, "Piso Bajo", 18210, "Granada", "Peligros"));
listaDirecciones.push(new Direccion("C/ MÃ¡laga", 23, "5ÂºC", 29770, "MÃ¡laga", "Torrox"));

// CreaciÃ³n de Estudiantes

listaEstudiantes.aÃ±adirEstudiante(new Estudiante("Alonso HernÃ¡ndez Robles", 21, listaDirecciones[0]));
listaEstudiantes.aÃ±adirEstudiante(new Estudiante("Ãlex GalÃ¡n Varo", 20, listaDirecciones[1]));
listaEstudiantes.aÃ±adirEstudiante(new Estudiante("Ana Quero de La Rosa", 19, listaDirecciones[2]));
listaEstudiantes.aÃ±adirEstudiante(new Estudiante("AdriÃ¡n MartÃ­n VÃ¡zquez", 19, listaDirecciones[3]));
listaEstudiantes.aÃ±adirEstudiante(new Estudiante("Javier Escobar Vela", 22, listaDirecciones[4]));

// CreaciÃ³n de Asignaturas

listaAsignaturas.aÃ±adirAsignatura(new Asignatura("DWEC"));
listaAsignaturas.aÃ±adirAsignatura(new Asignatura("DWES"));
listaAsignaturas.aÃ±adirAsignatura(new Asignatura("DEAW"));
listaAsignaturas.aÃ±adirAsignatura(new Asignatura("DIW"));
listaAsignaturas.aÃ±adirAsignatura(new Asignatura("EIE"));

// MatriculaciÃ³n de Estudiantes

listaEstudiantes.lista[0].matricular(listaAsignaturas.lista[0]);
listaEstudiantes.lista[0].matricular(listaAsignaturas.lista[1]);
listaEstudiantes.lista[0].matricular(listaAsignaturas.lista[2]);
listaEstudiantes.lista[0].matricular(listaAsignaturas.lista[3]);
listaEstudiantes.lista[0].matricular(listaAsignaturas.lista[4]);

listaEstudiantes.lista[1].matricular(listaAsignaturas.lista[0]);
listaEstudiantes.lista[1].matricular(listaAsignaturas.lista[1]);
listaEstudiantes.lista[1].matricular(listaAsignaturas.lista[2]);
listaEstudiantes.lista[1].matricular(listaAsignaturas.lista[3]);

listaEstudiantes.lista[2].matricular(listaAsignaturas.lista[1]);
listaEstudiantes.lista[2].matricular(listaAsignaturas.lista[2]);
listaEstudiantes.lista[2].matricular(listaAsignaturas.lista[3]);

listaEstudiantes.lista[3].matricular(listaAsignaturas.lista[2]);
listaEstudiantes.lista[3].matricular(listaAsignaturas.lista[3]);
listaEstudiantes.lista[3].matricular(listaAsignaturas.lista[4]);

// Desmatriculaciones de Estudiantes

listaEstudiantes.lista[0].desmatricular(listaAsignaturas.lista[4]);
listaEstudiantes.lista[1].desmatricular(listaAsignaturas.lista[2]);
listaEstudiantes.lista[2].desmatricular(listaAsignaturas.lista[1]);
listaEstudiantes.lista[3].desmatricular(listaAsignaturas.lista[3]);

// CalificaciÃ³n de Estudiantes

listaEstudiantes.lista[0].calificar(listaAsignaturas.lista[0], 10);
listaEstudiantes.lista[0].calificar(listaAsignaturas.lista[1], 9.3);
listaEstudiantes.lista[0].calificar(listaAsignaturas.lista[3], 9);
listaEstudiantes.lista[1].calificar(listaAsignaturas.lista[1], 9.4);
listaEstudiantes.lista[2].calificar(listaAsignaturas.lista[2], 8.3);
listaEstudiantes.lista[2].calificar(listaAsignaturas.lista[3], 8.85);

// Bucle while

while(true){

    console.clear();
    console.log("SGAEA", "titulo");
    console.log("(Sistema de GestiÃ³n AcadÃ©mica de Estudiantes y Asignaturas)", "subtitulo");
    console.log("1. â• Crear...", "boton");
    console.log("2. â– Eliminar...", "boton");
    console.log("3. âœ Matricular...", "boton");
    console.log("4. ğŸ“¤ Desmatricular...", "boton");
    console.log("5. ğŸ“‹ Registro de AuditorÃ­a", "boton");
    console.log("6. ğŸ”¢ Calificar...", "boton");
    console.log("7. ğŸ” Buscar...", "boton");
    console.log("8. ğŸ’° Calcular Promedio...", "boton");
    console.log("9. ğŸ§¾ Mostrar Reporte", "boton");

    eleccion = Number.parseInt(window.prompt("ElecciÃ³n:"));
    
    switch(eleccion){

        /**
         * 3.1. Crear
         * 
         * Siempre se pueden crear direcciones, estudiantes y/o asignaturas.
         */

        case 1:

            do{

                console.clear();
                console.log("Crear â•", "titulo");
                console.log("1. ğŸ  DirecciÃ³n", "boton");
                console.log("2. ğŸ‘¨â€ğŸ“ Estudiante", "boton");
                console.log("3. ğŸ“• Asignatura", "boton");
                console.log("0. âª Volver", "boton");

                eleccion = Number.parseInt(window.prompt("ElecciÃ³n:"));

                console.clear();

                switch(eleccion){

                    /**
                     * 3.1.1. Crear DirecciÃ³n
                     * 
                     * Se pedirÃ¡ calle, nÃºmero, piso, cÃ³digo postal, provincia y localidad.
                     * Al crearla, se guardarÃ¡ en el Array listaDirecciones.
                     */

                    case 1:

                        console.log("Crear DirecciÃ³n â•ğŸ ", "titulo");
                        console.log("Calle: ");
                        
                        do{

                            eleccion = window.prompt("Calle:");

                        }while(!eleccion || eleccion.trim() === "");

                        const calle = eleccion;

                        console.clear();
                        console.log("Crear DirecciÃ³n â•ğŸ ", "titulo");
                        console.log("Calle: " + calle);
                        console.log("NÃºmero: ");

                        do{

                            eleccion = window.prompt("NÃºmero:");

                        }while(!eleccion || eleccion.trim() === "");

                        const numero = eleccion;

                        console.clear();
                        console.log("Crear DirecciÃ³n â•ğŸ ", "titulo");
                        console.log("Calle: " + calle);
                        console.log("NÃºmero: " + numero);
                        console.log("Piso: ");

                        do{

                            eleccion = window.prompt("Piso:");

                        }while(!eleccion || eleccion.trim() === "");

                        const piso = eleccion;

                        console.clear();
                        console.log("Crear DirecciÃ³n â•ğŸ ", "titulo");
                        console.log("Calle: " + calle);
                        console.log("NÃºmero: " + numero);
                        console.log("Piso: " + piso);
                        console.log("CÃ³digo Postal: ");

                        do{

                            eleccion = window.prompt("CÃ³digo Postal:");

                        }while(!eleccion || eleccion.trim() === "");

                        const codigoPostal = eleccion;

                        console.clear();
                        console.log("Crear DirecciÃ³n â•ğŸ ", "titulo");
                        console.log("Calle: " + calle);
                        console.log("NÃºmero: " + numero);
                        console.log("Piso: " + piso);
                        console.log("CÃ³digo Postal: " + codigoPostal);
                        console.log("Provincia: ");

                        do{

                            eleccion = window.prompt("Provincia:");

                        }while(!eleccion || eleccion.trim() === "");

                        const provincia = eleccion;

                        console.clear();
                        console.log("Crear DirecciÃ³n â•ğŸ ", "titulo");
                        console.log("Calle: " + calle);
                        console.log("NÃºmero: " + numero);
                        console.log("Piso: " + piso);
                        console.log("CÃ³digo Postal: " + codigoPostal);
                        console.log("Provincia: " + provincia);
                        console.log("Localidad: ");

                        do{

                            eleccion = window.prompt("Localidad:");

                        }while(!eleccion || eleccion.trim() === "");

                        const localidad = eleccion;

                        console.clear();
                        console.log("Crear DirecciÃ³n â•ğŸ ", "titulo");
                        console.log("DirecciÃ³n Creada âœ…", "subtitulo");
                        console.log("Calle: " + calle);
                        console.log("NÃºmero: " + numero);
                        console.log("Piso: " + piso);
                        console.log("CÃ³digo Postal: " + codigoPostal);
                        console.log("Provincia: " + provincia);
                        console.log("Localidad: " + localidad);

                        window.alert("DirecciÃ³n creada correctamente.");

                        listaDirecciones.push(new Direccion(calle, numero, piso, codigoPostal, provincia, localidad));

                        eleccion = 0;
                        break;

                    /**
                     * 3.1.2. Crear Estudiante
                     * 
                     * Si el Array listaDirecciones no estÃ¡ vacÃ­o, se pedirÃ¡ si se quiere usar una direcciÃ³n.
                     * Si no, se pedirÃ¡ calle, nÃºmero, piso, cÃ³digo postal, provincia y localidad y se
                     * preguntarÃ¡ si se quiere guardar la direcciÃ³n en el Array listaDirecciones.
                     * 
                     * Se pedirÃ¡ nombre y edad, y se crearÃ¡ el estudiante.
                     */

                    case 2:

                        console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");

                        let direccion;

                        if(listaDirecciones.length > 0 &amp;&amp; window.confirm("Â¿Desea elegir una direcciÃ³n ya creada?")){

                            console.clear();
                            console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                            console.log("Seleccionar DirecciÃ³n ğŸ ", "subtitulo");

                            for(const dir of listaDirecciones){

                                console.log((listaDirecciones.indexOf(dir) + 1) + ". " + dir.toString(), "boton");

                            }

                            console.log("0. âª Volver", "boton");

                            do{

                                eleccion = Number.parseInt(window.prompt("Escoja una direcciÃ³n:"));
                                
                                if(Number.isNaN(eleccion)) eleccion = -1;

                            }while(eleccion &lt; 0 || eleccion > listaDirecciones.length);

                            if(eleccion == 0){
                                eleccion = -1;
                                break;
                            }

                            direccion = listaDirecciones[eleccion - 1];

                        }else{

                            console.clear();
                            console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                            console.log("Establecer DirecciÃ³n ğŸ ", "subtitulo");
                            console.log("Calle: ");
                            
                            do{

                                eleccion = window.prompt("Calle:");

                            }while(!eleccion || eleccion.trim() === "");

                            const calle = eleccion;

                            console.clear();
                            console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                            console.log("Establecer DirecciÃ³n ğŸ ", "subtitulo");
                            console.log("Calle: " + calle);
                            console.log("NÃºmero: ");
    
                            do{

                                eleccion = window.prompt("NÃºmero:");

                            }while(!eleccion || eleccion.trim() === "");

                            const numero = eleccion;

                            console.clear();
                            console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                            console.log("Establecer DirecciÃ³n ğŸ ", "subtitulo");
                            console.log("Calle: " + calle);
                            console.log("NÃºmero: " + numero);
                            console.log("Piso: ");
    
                            do{

                                eleccion = window.prompt("Piso:");

                            }while(!eleccion || eleccion.trim() === "");

                            const piso = eleccion;

                            console.clear();
                            console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                            console.log("Establecer DirecciÃ³n ğŸ ", "subtitulo");
                            console.log("Calle: " + calle);
                            console.log("NÃºmero: " + numero);
                            console.log("Piso: " + piso);
                            console.log("CÃ³digo Postal: ");
    
                            do{

                                eleccion = window.prompt("CÃ³digo Postal:");

                            }while(!eleccion || eleccion.trim() === "");

                            const codigoPostal = eleccion;

                            console.clear();
                            console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                            console.log("Establecer DirecciÃ³n ğŸ ", "subtitulo");
                            console.log("Calle: " + calle);
                            console.log("NÃºmero: " + numero);
                            console.log("Piso: " + piso);
                            console.log("CÃ³digo Postal: " + codigoPostal);
                            console.log("Provincia: ");
    
                            do{

                                eleccion = window.prompt("Provincia:");

                            }while(!eleccion || eleccion.trim() === "");

                            const provincia = eleccion;

                            console.clear();
                            console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                            console.log("Establecer DirecciÃ³n ğŸ ", "subtitulo");
                            console.log("Calle: " + calle);
                            console.log("NÃºmero: " + numero);
                            console.log("Piso: " + piso);
                            console.log("CÃ³digo Postal: " + codigoPostal);
                            console.log("Provincia: " + provincia);
                            console.log("Localidad: ");
    
                            do{

                                eleccion = window.prompt("Localidad:");

                            }while(!eleccion || eleccion.trim() === "");

                            const localidad = eleccion;

                            console.clear();
                            console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                            console.log("DirecciÃ³n Establecida âœ…", "subtitulo");
                            console.log("Calle: " + calle);
                            console.log("NÃºmero: " + numero);
                            console.log("Piso: " + piso);
                            console.log("CÃ³digo Postal: " + codigoPostal);
                            console.log("Provincia: " + provincia);
                            console.log("Localidad: " + localidad);

                            direccion = new Direccion(calle, numero, piso, codigoPostal, provincia, localidad);

                            if(window.confirm("Â¿Desea guardar esta direcciÃ³n?")){
                                
                                listaDirecciones.push(direccion);

                                console.clear();
                                console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                                console.log("DirecciÃ³n Guardada âœ…", "subtitulo");
                                console.log("Calle: " + calle);
                                console.log("NÃºmero: " + numero);
                                console.log("Piso: " + piso);
                                console.log("CÃ³digo Postal: " + codigoPostal);
                                console.log("Provincia: " + provincia);
                                console.log("Localidad: " + localidad);

                                window.alert("DirecciÃ³n guardada correctamente.");

                            }

                        }

                        console.clear();
                        console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                        console.log("Nombre: ");

                        do{

                            eleccion = window.prompt("Nombre:");

                        }while(!eleccion || eleccion.trim() === "");

                        const nombreEstudiante = eleccion;

                        console.clear();
                        console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                        console.log("Nombre: " + nombreEstudiante);
                        console.log("Edad: ");

                        do{

                            eleccion = Number.parseInt(window.prompt("Edad:"));
                            if(Number.isNaN(eleccion)) eleccion = -1;
                            
                        }while(eleccion &lt; 0);

                        const edad = eleccion;

                        console.clear();
                        console.log("Crear Estudiante â•ğŸ‘¨â€ğŸ“", "titulo");
                        
                        try{

                            listaEstudiantes.aÃ±adirEstudiante(new Estudiante(nombreEstudiante, edad, direccion));

                            console.log("Estudiante Creado âœ…", "subtitulo");
                            console.log("Nombre: " + nombreEstudiante);
                            console.log("Edad: " + edad);
                            console.log("DirecciÃ³n: " + direccion.toString());

                            window.alert("Estudiante creado correctamente.");

                        }catch(error){

                            console.log("Estudiante No Creado âŒ", "subtitulo");
                            console.log("Nombre: " + nombreEstudiante);
                            console.log("Edad: " + edad);
                            console.log("DirecciÃ³n: " + direccion.toString());

                            window.alert(error);

                        }

                        eleccion = 0;
                        break;

                    /**
                     * 3.1.3. Crear Asignatura
                     * 
                     * Se pedirÃ¡ nombre, y se crearÃ¡ la asignatura sÃ³lo si el listaAsignaturas no contiene
                     * una asignatura con el mismo nombre.
                     */

                    case 3:

                        console.log("Crear Asignatura â•ğŸ“•", "titulo");
                        console.log("Nombre: ");

                        do{

                            eleccion = window.prompt("Nombre:");

                        }while(!eleccion || eleccion.trim() === "");

                        const nombreAsignatura = eleccion;

                        console.clear();
                        console.log("Crear Asignatura â•ğŸ“•", "titulo");

                        try{

                            listaAsignaturas.aÃ±adirAsignatura(new Asignatura(nombreAsignatura));

                            console.log("Asignatura Creada âœ…", "subtitulo");
                            console.log("Nombre: " + nombreAsignatura);

                            window.alert("Asignatura creada correctamente.");

                        }catch(error){

                            console.log("Asignatura No Creada âŒ", "subtitulo");
                            console.log("Nombre: " + nombreAsignatura);

                            window.alert(error);

                        }

                        eleccion = 0;
                        break;

                }

            }while(eleccion != 0);

            break;

        /**
         * 3.2. Eliminar
         * 
         * No se podrÃ¡ acceder a Eliminar si no existe ningÃºn dato, ya sea direcciÃ³n, estudiante o asignatura.
         */

        case 2:

            do{

                if(listaDirecciones.length == 0 &amp;&amp; listaEstudiantes.lista.length == 0 &amp;&amp; listaAsignaturas.lista.length == 0){
                    
                    window.alert("No existen datos registrados.");
                    break;

                }

                console.clear();
                console.log("Eliminar â–", "titulo");
                console.log("1. ğŸ  DirecciÃ³n", "boton");
                console.log("2. ğŸ‘¨â€ğŸ“ Estudiante", "boton");
                console.log("3. ğŸ“• Asignatura", "boton");
                console.log("0. âª Volver", "boton");

                eleccion = Number.parseInt(window.prompt("ElecciÃ³n:"));

                switch(eleccion){

                    /**
                     * 3.2.1. Eliminar DirecciÃ³n
                     * 
                     * Si hay direcciones en el Array listaDirecciones, se escoge una de ellas para su
                     * eliminaciÃ³n.
                     */

                    case 1:

                        if(listaDirecciones.length == 0){

                            window.alert("No existen direcciones registradas.");
                            break;

                        }

                        console.clear();
                        console.log("Eliminar DirecciÃ³n â–ğŸ ", "titulo");
                        
                        for(const direccion of listaDirecciones){

                            console.log((listaDirecciones.indexOf(direccion) + 1) + ". " + direccion.toString(), "boton");

                        }

                        console.log("0. âª Volver", "boton");

                        do{

                            eleccion = Number.parseInt(window.prompt("Escoja una direcciÃ³n:"));

                            if(Number.isNaN(eleccion)) eleccion = -1;

                        }while(eleccion &lt; 0 || eleccion > listaDirecciones.length);

                        if(eleccion == 0){
                            eleccion = -1;
                            break;
                        }

                        listaDirecciones = listaDirecciones.filter((d, indice) => indice != eleccion - 1);

                        console.clear();
                        console.log("Eliminar DirecciÃ³n â–ğŸ ", "titulo");
                        console.log("DirecciÃ³n Eliminada âœ…", "subtitulo");
                        
                        for(const direccion of listaDirecciones){

                            if(listaDirecciones.length == 0){

                                console.log("No existen direcciones registradas.");
                                break;
    
                            }

                            console.log((listaDirecciones.indexOf(direccion) + 1) + ". " + direccion.toString(), "boton");

                        }

                        window.alert("DirecciÃ³n eliminada correctamente.");

                        eleccion = 0;
                        break;

                    /**
                     * 3.2.2. Eliminar Estudiante
                     * 
                     * Si existen estudiantes en listaEstudiantes, se escoge un estudiante para su
                     * eliminaciÃ³n.
                     */

                    case 2:

                        if(listaEstudiantes.lista.length == 0){

                            window.alert("No existen estudiantes registrados.");
                            break;

                        }

                        console.clear();
                        console.log("Eliminar Estudiante â–ğŸ‘¨â€ğŸ“", "titulo");
                        
                        for(const estudiante of listaEstudiantes.lista){

                            console.log((listaEstudiantes.lista.indexOf(estudiante) + 1) + ". " + estudiante.toString(), "boton");

                        }

                        console.log("0. âª Volver", "boton");

                        do{

                            eleccion = Number.parseInt(window.prompt("Escoja un estudiante:"));

                            if(Number.isNaN(eleccion)) eleccion = -1;

                        }while(eleccion &lt; 0 || eleccion > listaEstudiantes.lista.length);

                        if(eleccion == 0){
                            eleccion = -1;
                            break;
                        }

                        try{

                            listaEstudiantes.eliminarEstudiante(listaEstudiantes.lista[eleccion - 1].id);

                            console.clear();
                            console.log("Eliminar Estudiante â–ğŸ‘¨â€ğŸ“", "titulo");
                            console.log("Estudiante Eliminado âœ…", "subtitulo");
                            
                            for(const estudiante of listaEstudiantes.lista){

                                if(listaEstudiantes.lista.length == 0){

                                    console.log("No existen estudiantes registrados.");
                                    break;
        
                                }

                                console.log((listaEstudiantes.lista.indexOf(estudiante) + 1) + ". " + estudiante.toString(), "boton");
    
                            }

                            window.alert("Estudiante eliminado correctamente.");

                        }catch(error){

                            window.alert(error);

                        }

                        eleccion = 0;
                        break;

                    /**
                     * 3.2.3. Eliminar Asignatura
                     * 
                     * Si hay asignaturas en listaAsignaturas, se escoge una asignatura para su eliminaciÃ³n.
                     */

                    case 3:

                        if(listaAsignaturas.lista.length == 0){

                            window.alert("No existen asignaturas registradas.");
                            break;

                        }

                        console.clear();
                        console.log("Eliminar Asignatura â–ğŸ“•", "titulo");
                        
                        for(const asignatura of listaAsignaturas.lista){

                            console.log((listaAsignaturas.lista.indexOf(asignatura) + 1) + ". " + asignatura.toString(), "boton");

                        }

                        console.log("0. âª Volver", "boton");

                        do{

                            eleccion = Number.parseInt(window.prompt("Escoja una asignatura:"));

                            if(Number.isNaN(eleccion)) eleccion = -1;

                        }while(eleccion &lt; 0 || eleccion > listaAsignaturas.lista.length);

                        if(eleccion == 0){
                            eleccion = -1;
                            break;
                        }

                        try{

                            listaAsignaturas.eliminarAsignatura(listaAsignaturas.lista[eleccion - 1].toString());

                            console.clear();
                            console.log("Eliminar Asignatura â–ğŸ“•", "titulo");
                            console.log("Asignatura Eliminada âœ…", "subtitulo");

                            for(const asignatura of listaAsignaturas.lista){

                                if(listaAsignaturas.lista.length == 0){

                                    console.log("No existen asignaturas registradas.");
                                    break;
        
                                }

                                console.log((listaAsignaturas.lista.indexOf(asignatura) + 1) + ". " + asignatura.toString(), "boton");
    
                            }

                            window.alert("Asignatura eliminada correctamente.");

                        }catch(error){

                            window.alert(error);

                        }

                        eleccion = 0;
                        break;

                }

            }while(eleccion != 0);

            break;

        /**
         * 3.3. Matricular
         * 
         * Si no hay datos registrados, o no hay estudiantes, o no hay asignaturas, no se puede acceder.
         * 
         * En primer lugar se escoge un estudiante de listaEstudiantes. SÃ³lo se podrÃ¡n escoger aquellos que
         * no estÃ©n matriculados de todas las asignaturas.
         * DespuÃ©s, se escogen las asignaturas a matricular.
         */

        case 3:

            if(listaEstudiantes.lista.length == 0 &amp;&amp; listaAsignaturas.lista.length == 0){
                window.alert("No existen datos registrados.");
                break;
            }

            if(listaEstudiantes.lista.length == 0){
                window.alert("No existen estudiantes registrados.");
                break;
            }

            if(listaAsignaturas.lista.length == 0){
                window.alert("No existen asignaturas registradas.");
                break;
            }

            do{

                console.clear();
                console.log("Matricular âœ", "titulo");
                console.log("Seleccionar Estudiante ğŸ‘¨â€ğŸ“", "subtitulo");

                for(const estudiante of listaEstudiantes.lista){

                    if(estudiante.asignaturas.length != listaAsignaturas.lista.length){

                        console.log((listaEstudiantes.lista.indexOf(estudiante) + 1) + ". " + estudiante.toString(), "boton");

                    }else{
                        
                        console.log((listaEstudiantes.lista.indexOf(estudiante) + 1) + ". " + estudiante.toString(), "boton", "text-decoration: line-through;");

                    }

                }

                console.log("0. âª Volver", "boton");

                do{

                    eleccion = Number.parseInt(window.prompt("Escoja un estudiante:"));

                    if(Number.isNaN(eleccion)) eleccion = -1;

                }while(eleccion &lt; 0 || eleccion > listaEstudiantes.lista.length);

                if(eleccion == 0) break;

                const estudiante = listaEstudiantes.lista[eleccion - 1];

                if(estudiante.asignaturas.length == listaAsignaturas.lista.length){

                    window.alert("El estudiante ya estÃ¡ cursando todas las asignaturas.");
                    eleccion = -1;
                    continue;

                }

                let asignaturasSeleccionadas = [];
                let volverMenuEstudiantes = false;

                const asignaturasMatriculadas = estudiante.asignaturas.map(a => a[0].nombre);
                const asignaturasDisponibles = listaAsignaturas.lista.filter(a => !asignaturasMatriculadas.includes(a.nombre));

                do{

                    console.clear();
                    console.log("Matricular âœ", "titulo");
                    console.log("Estudiante: " + estudiante.toString());
                    console.log("Seleccionar Asignaturas ğŸ“š", "subtitulo");
                    
                    let textoSeleccionadas = "Seleccionadas (" + asignaturasSeleccionadas.length + ")";
                    
                    if(asignaturasSeleccionadas.length > 0) textoSeleccionadas += ": " + asignaturasSeleccionadas.map(a => a.nombre).join(", ");
                    
                    console.log(textoSeleccionadas);
                    
                    for(const asignatura of asignaturasDisponibles){

                        const seleccionada = asignaturasSeleccionadas.includes(asignatura) ? "â" : "â¬›";
                        console.log(seleccionada + " " + (asignaturasDisponibles.indexOf(asignatura) + 1) + ". " + asignatura.toString(), "boton");

                    }

                    console.log("0. âª Volver", "boton");

                    eleccion = window.prompt("Escoja una o mÃ¡s asignaturas:\n(Pulse solamente Enter para finalizar)");
                    eleccion = Number.parseInt(eleccion);

                    if(Number.isNaN(eleccion)) eleccion = -1;

                    if(eleccion == 0){

                        volverMenuEstudiantes = true;
                        eleccion = -1;
                        break;

                    }else if(eleccion > 0 &amp;&amp; eleccion &lt;= asignaturasDisponibles.length){

                        const asignatura = asignaturasDisponibles[eleccion - 1];

                        if(asignaturasSeleccionadas.includes(asignatura)){

                            asignaturasSeleccionadas = asignaturasSeleccionadas.filter(a => a != asignatura);

                        }else{

                            asignaturasSeleccionadas.push(asignatura);

                        }

                    }else{

                        if(asignaturasSeleccionadas.length > 0 &amp;&amp; !volverMenuEstudiantes){
                    
                            estudiante.matricular(...asignaturasSeleccionadas);
        
                            console.clear();
                            console.log("Matricular âœ", "titulo");
                            console.log("MatrÃ­cula Terminada âœ…", "subtitulo");
                            console.log("Estudiante: " + estudiante.toString());
                            console.log("Asignaturas (" + asignaturasSeleccionadas.length + "): " + asignaturasSeleccionadas.map(a => a.toString()).join(", "));
                            
                            window.alert("Estudiante matriculado correctamente");
    
                            eleccion = 0;
                            break;
        
                        }else{

                            window.alert("Debe seleccionar al menos una asignatura.");

                        }

                    }

                }while(true);

            }while(eleccion &lt; 0 || eleccion > listaEstudiantes.lista.length);

            break;

        /**
         * 3.4. Desmatricular
         * 
         * Si no existen datos, asignaturas, o estudiantes matriculados de al menos una asignatura, no se
         * puede acceder.
         * 
         * En primer lugar, se escoge un estudiante de entre los matriculados en al menos una asignatura.
         * DespuÃ©s,
         * se seleccionan las asignaturas a desmatricular.
         */

        case 4:

            if(listaEstudiantes.lista.length == 0 &amp;&amp; listaAsignaturas.lista.length == 0){
                window.alert("No existen datos registrados.");
                break;
            }

            if(listaEstudiantes.lista.length == 0){
                window.alert("No existen estudiantes registrados.");
                break;
            }

            if(listaAsignaturas.lista.length == 0){
                window.alert("No existen asignaturas registradas.");
                break;
            }

            if(listaEstudiantes.lista.every(e => e.asignaturas.length == 0)){
                window.alert("No existen estudiantes matriculados.");
                break;
            }

            const listaMatriculados = listaEstudiantes.lista.filter(e => e.asignaturas.length > 0);

            do{

                console.clear();
                console.log("Desmatricular ğŸ“¤", "titulo");
                console.log("Seleccionar Estudiante ğŸ‘¨â€ğŸ“", "subtitulo");

                for(const estudiante of listaMatriculados){

                    console.log((listaMatriculados.indexOf(estudiante) + 1) + ". " + estudiante.toString(), "boton");

                }

                console.log("0. âª Volver", "boton");

                do{

                    eleccion = Number.parseInt(window.prompt("Escoja un estudiante:"));

                    if(Number.isNaN(eleccion)) eleccion = -1;

                }while(eleccion &lt; 0 || eleccion > listaMatriculados.length);

                if(eleccion == 0) break;

                const estudiante = listaMatriculados[eleccion - 1];

                let asignaturasSeleccionadas = [];
                let volverMenuEstudiantes = false;
                
                do{

                    console.clear();
                    console.log("Desmatricular ğŸ“¤", "titulo");
                    console.log("Seleccionar Asignaturas ğŸ“š", "subtitulo");
                    
                    let textoSeleccionadas = "Seleccionadas (" + asignaturasSeleccionadas.length + ")";

                    if(asignaturasSeleccionadas.length > 0) textoSeleccionadas += ": " + asignaturasSeleccionadas.map(a => a.nombre).join(", ");
                    
                    console.log(textoSeleccionadas);
                    
                    for(const asignatura of estudiante.asignaturas){

                        const seleccionada = asignaturasSeleccionadas.includes(asignatura[0]) ? "â" : "â¬›";
                        console.log(seleccionada + " " + (estudiante.asignaturas.indexOf(asignatura) + 1) + ". " + asignatura[0].toString(), "boton");

                    }

                    console.log("0. âª Volver", "boton");

                    eleccion = window.prompt("Escoja una o mÃ¡s asignaturas:\n(Pulse solamente Enter para finalizar)");
                    eleccion = Number.parseInt(eleccion);

                    if(Number.isNaN(eleccion)) eleccion = -1;

                    if(eleccion == 0){

                        volverMenuEstudiantes = true;
                        eleccion = -1;
                        break;

                    }else if(eleccion > 0 &amp;&amp; eleccion &lt;= estudiante.asignaturas.length){

                        const asignatura = estudiante.asignaturas[eleccion - 1][0];

                        if(asignaturasSeleccionadas.includes(asignatura)){

                            asignaturasSeleccionadas = asignaturasSeleccionadas.filter(a => a != asignatura);

                        }else{

                            asignaturasSeleccionadas.push(asignatura);

                        }

                    }else{

                        if(asignaturasSeleccionadas.length > 0 &amp;&amp; !volverMenuEstudiantes){
                    
                            estudiante.desmatricular(...asignaturasSeleccionadas);
        
                            console.clear();
                            console.log("Desmatricular ğŸ“¤", "titulo");
                            console.log("DesmatrÃ­cula Terminada âœ…", "subtitulo");
                            console.log("Estudiante: " + estudiante.toString());
                            console.log("Asignaturas (" + asignaturasSeleccionadas.length + "): " + asignaturasSeleccionadas.map(a => a.toString()).join(", "));
                            
                            window.alert("Estudiante desmatriculado correctamente.");

                            eleccion = 0;
                            break;
        
                        }else{

                            window.alert("Debe seleccionar al menos una asignatura.");

                        }

                    }

                }while(true);

            }while(eleccion &lt; 0 || eleccion > listaMatriculados.length);

            break;

        /**
         * 3.5. Registro de AuditorÃ­a
         * 
         * Si no existen datos, estudiantes o asignaturas, no se puede acceder.
         * 
         * Se escoge el estudiante para obtener sus registros y se muestran.
         */

        case 5:

            if(listaEstudiantes.lista.length == 0 &amp;&amp; listaAsignaturas.lista.length == 0){
                window.alert("No existen datos registrados.");
                break;
            }

            if(listaEstudiantes.lista.length == 0){
                window.alert("No existen estudiantes registrados.");
                break;
            }

            if(listaAsignaturas.lista.length == 0){
                window.alert("No existen asignaturas registradas.");
                break;
            }

            do{

                console.clear();
                console.log("Registro de AuditorÃ­a ğŸ“‹", "titulo");
                console.log("Seleccionar Estudiante ğŸ‘¨â€ğŸ“", "subtitulo");

                for(const estudiante of listaEstudiantes.lista){

                    console.log((listaEstudiantes.lista.indexOf(estudiante) + 1) + ". " + estudiante.toString(), "boton");

                }

                console.log("0. âª Volver", "boton");

                do{

                    eleccion = Number.parseInt(window.prompt("Escoja un estudiante:"));

                    if(Number.isNaN(eleccion)) eleccion = -1;

                }while(eleccion &lt; 0 || eleccion > listaEstudiantes.lista.length);

                if(eleccion == 0) break;

                const estudiante = listaEstudiantes.lista[eleccion - 1];

                console.clear();
                console.log("Registro de AuditorÃ­a ğŸ“‹", "titulo");
                console.log(estudiante.nombre + " ğŸ‘¨â€ğŸ“", "subtitulo");
                
                let estilo = "border-radius: 5px;";
                estilo += "margin: 5px;";
                estilo += "border: 2px solid lightgray;";
                estilo += "background-color: black;";
                estilo += "color: white;";

                if(estudiante.registros.length == 0){
                    
                    console.log("No existen registros.", estilo, "font-family: 'consolas', 'sans-serif';");

                }else{

                    for(const registro of estudiante.registros){

                        console.log(registro, estilo, "font-family: 'consolas', 'sans-serif';");
    
                    }

                }

                window.alert("Acepte para volver.");

            }while(eleccion != 0);

            break;

        /**
         * 3.6. Calificar
         * 
         * Si no existen datos, asignaturas, o estudiantes matriculados de al menos una asignatura, no se 
         * puede acceder.
         * 
         * En primer lugar, se escoge entre los estudiantes matriculados de al menos una asignatura.
         * DespuÃ©s, se escoge la asignatura a calificar entre las asignaturas de las cuales el estudiante
         * estÃ¡ matriculado. Si dicha asignatura ya estÃ¡ calificada, se emitirÃ¡ una advertencia sobre la
         * sobreescritura de la nota.
         * Finalmente, se pide una nota entre 0 y 10 y se califica al estudiante con dichos parÃ¡metros.
         */

        case 6:

            if(listaEstudiantes.lista.length == 0 &amp;&amp; listaAsignaturas.lista.length == 0){
                window.alert("No existen datos registrados.");
                break;
            }

            if(listaEstudiantes.lista.length == 0){
                window.alert("No existen estudiantes registrados.");
                break;
            }

            if(listaAsignaturas.lista.length == 0){
                window.alert("No existen asignaturas registradas.");
                break;
            }

            if(listaEstudiantes.lista.every(e => e.asignaturas.length == 0)){
                window.alert("No existen estudiantes matriculados.");
                break;
            }

            const matriculados = listaEstudiantes.lista.filter(e => e.asignaturas.length > 0);

            do{

                console.clear();
                console.log("Calificar ğŸ”¢", "titulo");
                console.log("Seleccionar Estudiante ğŸ‘¨â€ğŸ“", "subtitulo");

                for(const estudiante of matriculados){

                    console.log((matriculados.indexOf(estudiante) + 1) + ". " + estudiante.toString(), "boton");

                }

                console.log("0. âª Volver", "boton");

                do{

                    eleccion = Number.parseInt(window.prompt("Escoja un estudiante:"));

                    if(Number.isNaN(eleccion)) eleccion = -1;

                }while(eleccion &lt; 0 || eleccion > matriculados.length);

                if(eleccion == 0) break;

                const estudiante = matriculados[eleccion - 1];

                do{

                    console.clear();
                    console.log("Calificar ğŸ”¢", "titulo");
                    console.log("Estudiante: " + estudiante.toString());
                    console.log("Seleccionar Asignatura ğŸ“•", "subtitulo");

                    for(const asignatura of estudiante.asignaturas){

                        let resultado = (estudiante.asignaturas.indexOf(asignatura) + 1) + ". " + asignatura[0].toString();
                        
                        if(typeof asignatura[1] != "string") resultado += " (" + asignatura[1].toFixed(2) + ")";
                        console.log(resultado, "boton");

                    }

                    console.log("0. âª Volver", "boton");

                    let valorNota;
                    let sobreescritura = false;
                    let asignatura;

                    do{

                        eleccion = Number.parseInt(window.prompt("Escoja una asignatura:"));
                        
                        if(Number.isNaN(eleccion)){
                            
                            eleccion = -1;

                        }else if(eleccion > 0 &amp;&amp; eleccion &lt;= estudiante.asignaturas.length){

                            valorNota = estudiante.asignaturas[eleccion - 1][1];

                            if(typeof valorNota != "string"){

                                if(window.confirm("Â¿Seguro que quiere sobreescribir la nota anterior (" + valorNota.toFixed(2) + ")?")){
                                
                                    sobreescritura = true;
                                    asignatura = estudiante.asignaturas[eleccion - 1][0];
                                    
                                    try{

                                        asignatura.eliminarCalificacion(valorNota);

                                    }catch(error){

                                        window.alert(error);

                                    }
                                
                                }else{
                                 
                                    eleccion = -1;
                                
                                }

                            }

                        }

                    }while(eleccion &lt; 0 || eleccion > estudiante.asignaturas.length);

                    if(eleccion == 0){
                        eleccion = -1;
                        break;
                    }

                    if(!sobreescritura) asignatura = estudiante.asignaturas[eleccion - 1][0];

                    console.clear();
                    console.log("Calificar ğŸ”¢", "titulo");
                    console.log("Poner Nota âœ", "subtitulo");
                    console.log("Estudiante: " + estudiante.toString());
                    console.log("Asignatura: " + asignatura.toString());
                    console.log("Nota: ");

                    do{

                        eleccion = Number.parseFloat(window.prompt("Nota:"));
                        
                        if (Number.isNaN(eleccion) || eleccion &lt; 0 || eleccion > 10) {

                            eleccion = -1;
                        
                        } else {
                        
                            eleccion = eleccion.toFixed(2);
                        
                        }

                    }while(eleccion &lt; 0 || eleccion > 10);

                    const nota = eleccion;

                    try{

                        estudiante.calificar(asignatura, nota);

                        console.clear();
                        console.log("Calificar ğŸ”¢", "titulo");
                        console.log("Estudiante Calificado âœ…", "subtitulo");
                        console.log("Estudiante: " + estudiante.toString());
                        console.log("Asignatura: " + asignatura.toString());
                        console.log("Nota: " + nota);

                        window.alert("Estudiante calificado correctamente.");

                        eleccion = 0;

                    }catch(error){

                        window.alert(error);

                    }

                }while(eleccion &lt; 0 || eleccion > estudiante.asignaturas.length);

            }while(eleccion &lt; 0 || eleccion > listaEstudiantes.lista.length);
            
            break;

        /**
         * 3.7. Buscar
         * 
         * Si no existen datos, estudiantes o asignaturas, no se puede acceder.
         */

        case 7:

            if(listaEstudiantes.lista.length == 0 &amp;&amp; listaAsignaturas.lista.length == 0){
                window.alert("No existen datos registrados.");
                break;
            }

            if(listaEstudiantes.lista.length == 0){
                window.alert("No existen estudiantes registrados.");
                break;
            }

            if(listaAsignaturas.lista.length == 0){
                window.alert("No existen asignaturas registradas.");
                break;
            }

            do{

                console.clear();
                console.log("Buscar ğŸ”", "titulo");
                console.log("1. ğŸ“ Estudiantes", "boton");
                console.log("2. ğŸ“š Asignaturas", "boton");
                console.log("0. âª Volver", "boton");

                eleccion = Number.parseInt(window.prompt("ElecciÃ³n:"));

                console.clear();

                switch(eleccion){

                    /**
                     * 3.7.1. Buscar Estudiantes
                     * 
                     * Al principio, se muestran todos los estudiantes de listaEstudiantes.
                     * Se introduce un texto y se muestran las coincidencias de los estudiantes cuyo nombre
                     * incluya dicho texto.
                     */

                    case 1:

                        console.log("Buscar Estudiantes ğŸ”ğŸ“", "titulo");
                        console.log("Lista de Estudiantes", "subtitulo");

                        for(const estudiante of listaEstudiantes.lista){

                            console.log(estudiante.toString(), "boton");

                        }

                        do{

                            eleccion = window.prompt("Introduzca el nombre del estudiante:");

                        }while(!eleccion || eleccion.trim() == "" || !eleccion.match(/^[a-zA-ZÃ¡Ã©Ã­Ã³ÃºÃ¼ÃÃ‰ÃÃ“ÃšÃœ ]+$/));

                        const resultadosEstudiantes = listaEstudiantes.busquedaEstudiantes(eleccion);

                        console.clear();
                        console.log("Buscar Estudiantes ğŸ”ğŸ“", "titulo");
                        console.log("Resultados (" + resultadosEstudiantes.length + "): \"" + eleccion + "\"", "subtitulo");

                        if(resultadosEstudiantes.length == 0){

                            window.alert("No se ha encontrado ningÃºn resultado.");
                            break;

                        }

                        for(const estudiante of resultadosEstudiantes){

                            console.log(estudiante.toString(), "boton");

                        }

                        window.alert("Acepte para volver.");

                        eleccion = 0;
                        break;

                    /**
                     * 3.7.2. Buscar Asignaturas
                     *
                     * Al principio, se muestran todos las asignaturas de listaAsignaturas.
                     * Se introduce un texto y se muestran las coincidencias de las asignaturas cuyo nombre
                     * incluya dicho texto.
                     */

                    case 2:

                        console.log("Buscar Asignaturas ğŸ”ğŸ“š", "titulo");
                        console.log("Lista de Asignaturas", "subtitulo");

                        for(const asignatura of listaAsignaturas.lista){

                            console.log(asignatura.toString(), "boton");

                        }

                        do{

                            eleccion = window.prompt("Introduzca el nombre de la asignatura:");

                        }while(!eleccion || eleccion.trim() == "" || !eleccion.match(/^[a-zA-ZÃ¡Ã©Ã­Ã³ÃºÃ¼ÃÃ‰ÃÃ“ÃšÃœ ]+$/));

                        const resultadosAsignaturas = listaAsignaturas.busquedaAsignaturas(eleccion);

                        console.clear();
                        console.log("Buscar Asignaturas ğŸ”ğŸ“š", "titulo");
                        console.log("Resultados (" + resultadosAsignaturas.length + "): \"" + eleccion + "\"", "subtitulo");

                        if(resultadosAsignaturas.length == 0){

                            window.alert("No se ha encontrado ninguna asignatura.");
                            break;

                        }

                        for(const estudiante of resultadosAsignaturas){

                            console.log(estudiante.toString(), "boton");

                        }

                        window.alert("Acepte para volver.");

                        eleccion = 0;
                        break;

                }

            }while(eleccion != 0);

            break;

        /**
         * 3.8. Calcular Promedio
         * 
         * Si no existen datos, estudiantes o asignaturas, no se puede acceder.
         */

        case 8:

            if(listaEstudiantes.lista.length == 0 &amp;&amp; listaAsignaturas.lista.length == 0){
                window.alert("No existen datos registrados.");
                break;
            }

            if(listaEstudiantes.lista.length == 0){
                window.alert("No existen estudiantes registrados.");
                break;
            }

            if(listaAsignaturas.lista.length == 0){
                window.alert("No existen asignaturas registradas.");
                break;
            }

            do{

                console.clear();
                console.log("Calcular Promedio ğŸ’°", "titulo");
                console.log("1. ğŸŒ General", "boton");
                console.log("2. ğŸ“š Asignaturas", "boton");
                console.log("0. âª Volver", "boton");

                eleccion = Number.parseInt(window.prompt("ElecciÃ³n:"));

                console.clear();

                switch(eleccion){

                    /**
                     * 3.8.1. Promedio General
                     * 
                     * Muestra el promedio de los promedios de los estudiantes (promedio general) y una de los promedios
                     * de cada estudiante.
                     */

                    case 1:

                        console.log("Calcular Promedio ğŸ’°ğŸŒ", "titulo");
                        console.log("Promedio General: " + listaEstudiantes.promedioGeneral, "subtitulo");
                        
                        for(const estudiante of listaEstudiantes.lista){

                            console.log(estudiante.nombre + ": " + estudiante.promedio);

                        }

                        window.alert("Acepte para volver.");

                        eleccion = 0;
                        break;

                    /**
                     * 3.8.2. Promedio por Asignaturas
                     * 
                     * Muestra el promedio en una asignatura de las notas de todos los estudiantes matriculados en ella.
                     */

                    case 2:

                        console.log("Calcular Promedio ğŸ’°", "titulo");
                        console.log("Lista de Asignaturas ğŸ“š", "subtitulo");
                        
                        for(const asignatura of listaAsignaturas.lista){

                            console.log(asignatura.nombre + ": " + asignatura.promedio);

                        }

                        window.alert("Acepte para volver.");

                        eleccion = 0;
                        break;

                }

            }while(eleccion != 0);

            break;

        /**
         * 3.9. Mostrar Reporte
         * 
         * Muestra el reporte de todos los estudiantes y su informaciÃ³n, tanto datos personales (nombre, edad y direcciÃ³n)
         * como calificaciones (asignaturas y promedio).
         */

        case 9:

            if(listaEstudiantes.lista.length == 0){
                window.alert("No existen estudiantes registrados.");
                break;
            }

            console.clear();
            console.log("Reporte de Estudiantes (" + listaEstudiantes.lista.length + ") ğŸ§¾", "titulo");

            listaEstudiantes.mostrarReporte();
            
            window.alert("Acepte para volver.");

            break;
        
    }

}</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Wed Jan 15 2025 17:54:24 GMT+0100 (hora estÃ¡ndar de Europa central) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
